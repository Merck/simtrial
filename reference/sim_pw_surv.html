<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate a stratified time-to-event outcome randomized trial — sim_pw_surv • simtrial</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet"><script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Simulate a stratified time-to-event outcome randomized trial — sim_pw_surv"><meta name="description" content="sim_pw_surv() enables simulation of a clinical trial with
essentially arbitrary patterns of enrollment, failure rates and censoring.
The piecewise exponential distribution allows a simple method to specify
a distribution and enrollment pattern where the enrollment, failure,
and dropout rate changes over time.
While the main purpose may be to generate a trial that can be analyzed
at a single point in time or using group sequential methods,
the routine can also be used to simulate an adaptive trial design.
Enrollment, failure, and dropout rates are specified by treatment group,
stratum and time period.
Fixed block randomization is used; blocks must include treatments provided
in failure and dropout specification.
Default arguments are set up to allow very simple implementation of
a non-proportional hazards assumption for an unstratified design."><meta property="og:description" content="sim_pw_surv() enables simulation of a clinical trial with
essentially arbitrary patterns of enrollment, failure rates and censoring.
The piecewise exponential distribution allows a simple method to specify
a distribution and enrollment pattern where the enrollment, failure,
and dropout rate changes over time.
While the main purpose may be to generate a trial that can be analyzed
at a single point in time or using group sequential methods,
the routine can also be used to simulate an adaptive trial design.
Enrollment, failure, and dropout rates are specified by treatment group,
stratum and time period.
Fixed block randomization is used; blocks must include treatments provided
in failure and dropout specification.
Default arguments are set up to allow very simple implementation of
a non-proportional hazards assumption for an unstratified design."><meta property="og:image" content="https://merck.github.io/simtrial/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">simtrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Merck/simtrial/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate a stratified time-to-event outcome randomized trial</h1>
      <small class="dont-index">Source: <a href="https://github.com/Merck/simtrial/blob/main/R/sim_pw_surv.R" class="external-link"><code>R/sim_pw_surv.R</code></a></small>
      <div class="d-none name"><code>sim_pw_surv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>sim_pw_surv()</code> enables simulation of a clinical trial with
essentially arbitrary patterns of enrollment, failure rates and censoring.
The piecewise exponential distribution allows a simple method to specify
a distribution and enrollment pattern where the enrollment, failure,
and dropout rate changes over time.
While the main purpose may be to generate a trial that can be analyzed
at a single point in time or using group sequential methods,
the routine can also be used to simulate an adaptive trial design.
Enrollment, failure, and dropout rates are specified by treatment group,
stratum and time period.
Fixed block randomization is used; blocks must include treatments provided
in failure and dropout specification.
Default arguments are set up to allow very simple implementation of
a non-proportional hazards assumption for an unstratified design.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_pw_surv</span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"All"</span>, p <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  block <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  enroll_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">9</span>, duration <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"All"</span>, <span class="fl">4</span><span class="op">)</span>, period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, treatment <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, rate <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">9</span>, <span class="fl">9</span>, <span class="fl">18</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  dropout_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"All"</span>, <span class="fl">2</span><span class="op">)</span>, period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, treatment <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"experimental"</span><span class="op">)</span>, duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">2</span><span class="op">)</span>, rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Number of observations.
If length(n) &gt; 1, the length is taken to be the number required.</p></dd>


<dt id="arg-stratum">stratum<a class="anchor" aria-label="anchor" href="#arg-stratum"></a></dt>
<dd><p>A data frame with stratum specified in <code>stratum</code>,
probability (incidence) of each stratum in <code>p</code>.</p></dd>


<dt id="arg-block">block<a class="anchor" aria-label="anchor" href="#arg-block"></a></dt>
<dd><p>Vector of treatments to be included in each block.</p></dd>


<dt id="arg-enroll-rate">enroll_rate<a class="anchor" aria-label="anchor" href="#arg-enroll-rate"></a></dt>
<dd><p>Enrollment rates; see details and examples.</p></dd>


<dt id="arg-fail-rate">fail_rate<a class="anchor" aria-label="anchor" href="#arg-fail-rate"></a></dt>
<dd><p>Failure rates; see details and examples;
note that treatments need to be the same as input in block.</p></dd>


<dt id="arg-dropout-rate">dropout_rate<a class="anchor" aria-label="anchor" href="#arg-dropout-rate"></a></dt>
<dd><p>Dropout rates; see details and examples;
note that treatments need to be the same as input in block.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with the following variables for each observation:</p><ul><li><p><code>stratum</code>.</p></li>
<li><p><code>enroll_time</code>: Enrollment time for the observation.</p></li>
<li><p><code>Treatment</code>: Treatment group; this will be one of the values
in the input <code>block</code>.</p></li>
<li><p><code>fail_time</code>: Failure time generated using <code><a href="rpwexp.html">rpwexp()</a></code>.</p></li>
<li><p><code>dropout_time</code>: Dropout time generated using <code><a href="rpwexp.html">rpwexp()</a></code>.</p></li>
<li><p><code>cte</code>: Calendar time of enrollment plot the minimum of
failure time and dropout time.</p></li>
<li><p><code>fail</code>: Indicator that <code>cte</code> was set using failure time;
i.e., 1 is a failure, 0 is a dropout.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1</span></span></span>
<span class="r-in"><span><span class="fu">sim_pw_surv</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum enroll_time    treatment  fail_time dropout_time        cte fail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      All  0.07001605      control 19.5650346     26.24930 19.6350507    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      All  0.11250082 experimental  1.2800017    823.88014  1.3925025    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      All  0.16059246 experimental 99.3270563    946.28365 99.4876487    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      All  0.18680088      control  0.1150366   1982.95198  0.3018375    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      All  0.32348567      control  0.2659009    293.80946  0.5893865    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      All  0.53924326 experimental 12.3655734    424.86428 12.9048166    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      All  0.56067164 experimental 24.8934865   3601.37946 25.4541582    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      All  0.56316045      control  1.9729803   1089.95618  2.5361408    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      All  0.66056548      control 18.4483802    434.31466 19.1089457    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     All  0.87646201      control  5.9717512    125.93169  6.8482132    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     All  0.88612590 experimental  8.9691062    951.20200  9.8552321    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     All  0.94573946 experimental  9.4852510   2118.15209 10.4309904    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     All  1.01743409 experimental  1.0412043   1901.83435  2.0586384    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     All  1.15743059 experimental  4.2301976    160.37688  5.3876282    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     All  1.29455783      control  3.8388328    847.48951  5.1333906    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     All  1.31063025      control  3.3195804     58.16193  4.6302107    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     All  1.32489185      control  5.1065099   1375.31437  6.4314018    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     All  1.40692309 experimental 32.7491726    197.03324 34.1560957    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     All  1.51964417      control  3.7912304     11.34259  5.3108745    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     All  1.63246681 experimental  2.2875405    804.91681  3.9200073    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2</span></span></span>
<span class="r-in"><span><span class="co"># 3:1 randomization</span></span></span>
<span class="r-in"><span><span class="fu">sim_pw_surv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  block <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"control"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum enroll_time    treatment   fail_time dropout_time        cte fail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      All   0.2367048      control   6.7831275   189.732031   7.019832    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      All   0.3268209 experimental   3.5338628   255.836968   3.860684    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      All   0.3384515 experimental   9.4928294   742.229574   9.831281    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      All   0.3399433 experimental  12.4943694   685.656819  12.834313    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      All   0.4244262 experimental  41.0686377  1134.605316  41.493064    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      All   0.4436312      control   2.6178723   699.637074   3.061504    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      All   0.7653554 experimental 116.8281381  1848.415820 117.593493    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      All   0.8001982 experimental   1.1196077   162.507928   1.919806    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      All   0.8266640 experimental  44.2434604     4.963087   5.789751    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     All   0.8681263      control   3.2042041   706.781454   4.072330    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     All   0.9199099 experimental   4.5214569   456.380132   5.441367    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     All   0.9324011 experimental   6.9775576   276.484136   7.909959    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     All   1.0572405 experimental  14.8730426   426.240944  15.930283    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     All   1.1327757      control   2.3365045  1101.256078   3.469280    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     All   1.2330737 experimental   0.1715598    30.568471   1.404633    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     All   1.4624788 experimental  10.0687941  3025.328402  11.531273    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     All   1.4645759 experimental  17.4354083  1147.682266  18.899984    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     All   1.7309944 experimental  99.0519123    76.763221  78.494216    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     All   1.8536219      control  20.8075822  1447.017415  22.661204    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     All   1.8904926 experimental  19.0166778   440.688450  20.907170    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3</span></span></span>
<span class="r-in"><span><span class="co"># Simulate 2 stratum; will use defaults for blocking and enrollRates</span></span></span>
<span class="r-in"><span><span class="fu">sim_pw_surv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  <span class="co"># 2 stratum,30% and 70% prevalence</span></span></span>
<span class="r-in"><span>  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"High"</span><span class="op">)</span>, p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.3</span>, <span class="fl">.7</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"High"</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.03</span>, <span class="fl">.05</span>, <span class="fl">.03</span>, <span class="fl">.03</span>, <span class="fl">.05</span>, <span class="fl">.08</span>, <span class="fl">.07</span>, <span class="fl">.04</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  dropout_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"High"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"experimental"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">.001</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum enroll_time    treatment  fail_time dropout_time       cte fail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     High   0.1036777 experimental 20.2331348   4174.94331 20.336813    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     High   0.1343389 experimental  4.1098911    465.29175  4.244230    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     High   0.2064661      control 17.5605004   1004.53947 17.766967    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     High   0.2796553      control 23.0282302    494.34540 23.307885    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Low   0.3086204      control 11.4731163     23.72062 11.781737    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     High   0.3111598 experimental  1.8322780   2189.41244  2.143438    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     High   0.9270572      control 11.6284285     21.84553 12.555486    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      Low   0.9797810 experimental 15.8387307   3407.82733 16.818512    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     High   1.0627224      control  6.7833167    699.12197  7.846039    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    High   1.1896626 experimental  0.8167457    361.39980  2.006408    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     Low   1.2618837      control 24.4847066    661.56404 25.746590    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    High   1.4095626      control 29.7332577    788.59361 31.142820    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     Low   1.6101124 experimental 54.1703944   1135.55339 55.780507    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14    High   1.7441575 experimental  8.6834669   3357.73901 10.427624    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    High   1.9973926 experimental  0.6192459    238.07083  2.616639    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     Low   2.3403839      control 45.4400769   2356.38747 47.780461    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    High   2.5440934      control 11.0088796    382.11254 13.552973    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18    High   2.5440974      control  6.0942686    134.13149  8.638366    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19    High   2.6168482      control 10.6131452    485.16067 13.229993    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     Low   2.6640095 experimental 49.5705882   2008.07518 52.234598    1</span>
<span class="r-in"><span><span class="co"># Example 4</span></span></span>
<span class="r-in"><span><span class="co"># If you want a more rectangular entry for a data.frame</span></span></span>
<span class="r-in"><span><span class="va">fail_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"control"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.03</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.03</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">2</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.02</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"control"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.05</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.06</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">2</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.03</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dropout_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"control"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"control"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.001</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">sim_pw_surv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"High"</span><span class="op">)</span>, p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.3</span>, <span class="fl">.7</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  dropout_rate <span class="op">=</span> <span class="va">dropout_rate</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum enroll_time    treatment fail_time dropout_time       cte fail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      Low   0.2572800      control 37.602886   465.177813 37.860166    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     High   0.4370483      control 20.546177  1352.219300 20.983226    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      Low   0.4944613 experimental 78.619566   338.976877 79.114027    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Low   0.5673761 experimental 15.853988   347.672350 16.421364    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Low   1.1069423      control  2.195484   723.838025  3.302426    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     High   1.1680008 experimental 10.451312   633.099389 11.619313    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      Low   1.2875002 experimental 38.684903  2506.432402 39.972403    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     High   1.4881602      control  9.463377  1250.153280 10.951537    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     High   1.5505213 experimental 15.439429  1193.758523 16.989950    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     Low   1.6826246 experimental 11.089760   645.756427 12.772384    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     Low   1.8512677      control 29.195486     8.994333 10.845600    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    High   2.0465840      control 31.254707  2963.649460 33.301291    1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson, Yujie Zhao, Yilong Zhang. Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0. <br>Copyright © 2024 Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved.</p>
</div>

<div class="pkgdown-footer-right">
  <p><span></span></p>
</div>

    </footer></div>





  </body></html>

