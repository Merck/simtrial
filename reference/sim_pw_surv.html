<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="sim_pw_surv() enables simulation of a clinical trial with
essentially arbitrary patterns of enrollment, failure rates and censoring.
The piecewise exponential distribution allows a simple method to specify
a distribution and enrollment pattern where the enrollment, failure,
and dropout rate changes over time.
While the main purpose may be to generate a trial that can be analyzed
at a single point in time or using group sequential methods,
the routine can also be used to simulate an adaptive trial design.
Enrollment, failure, and dropout rates are specified by treatment group,
stratum and time period.
Fixed block randomization is used; blocks must include treatments provided
in failure and dropout specification.
Default arguments are set up to allow very simple implementation of
a non-proportional hazards assumption for an unstratified design."><title>Simulate a stratified time-to-event outcome randomized trial — sim_pw_surv • simtrial</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Simulate a stratified time-to-event outcome randomized trial — sim_pw_surv"><meta property="og:description" content="sim_pw_surv() enables simulation of a clinical trial with
essentially arbitrary patterns of enrollment, failure rates and censoring.
The piecewise exponential distribution allows a simple method to specify
a distribution and enrollment pattern where the enrollment, failure,
and dropout rate changes over time.
While the main purpose may be to generate a trial that can be analyzed
at a single point in time or using group sequential methods,
the routine can also be used to simulate an adaptive trial design.
Enrollment, failure, and dropout rates are specified by treatment group,
stratum and time period.
Fixed block randomization is used; blocks must include treatments provided
in failure and dropout specification.
Default arguments are set up to allow very simple implementation of
a non-proportional hazards assumption for an unstratified design."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">simtrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.7</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Merck/simtrial/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Simulate a stratified time-to-event outcome randomized trial</h1>
      <small class="dont-index">Source: <a href="https://github.com/Merck/simtrial/blob/HEAD/R/sim_pw_surv.R" class="external-link"><code>R/sim_pw_surv.R</code></a></small>
      <div class="d-none name"><code>sim_pw_surv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>sim_pw_surv()</code> enables simulation of a clinical trial with
essentially arbitrary patterns of enrollment, failure rates and censoring.
The piecewise exponential distribution allows a simple method to specify
a distribution and enrollment pattern where the enrollment, failure,
and dropout rate changes over time.
While the main purpose may be to generate a trial that can be analyzed
at a single point in time or using group sequential methods,
the routine can also be used to simulate an adaptive trial design.
Enrollment, failure, and dropout rates are specified by treatment group,
stratum and time period.
Fixed block randomization is used; blocks must include treatments provided
in failure and dropout specification.
Default arguments are set up to allow very simple implementation of
a non-proportional hazards assumption for an unstratified design.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_pw_surv</span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"All"</span>, p <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  block <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  enroll_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">9</span>, duration <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"All"</span>, <span class="fl">4</span><span class="op">)</span>, period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, treatment <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, rate <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">9</span>, <span class="fl">9</span>, <span class="fl">18</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  dropout_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"All"</span>, <span class="fl">2</span><span class="op">)</span>, period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, treatment <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"experimental"</span><span class="op">)</span>, duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">2</span><span class="op">)</span>, rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>n</dt>
<dd><p>Number of observations.
If length(n) &gt; 1, the length is taken to be the number required.</p></dd>


<dt>stratum</dt>
<dd><p>A data frame with stratum specified in <code>stratum</code>,
probability (incidence) of each stratum in <code>p</code>.</p></dd>


<dt>block</dt>
<dd><p>Vector of treatments to be included in each block.</p></dd>


<dt>enroll_rate</dt>
<dd><p>Enrollment rates; see details and examples.</p></dd>


<dt>fail_rate</dt>
<dd><p>Failure rates; see details and examples;
note that treatments need to be the same as input in block.</p></dd>


<dt>dropout_rate</dt>
<dd><p>Dropout rates; see details and examples;
note that treatments need to be the same as input in block.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame with the following variables for each observation:</p><ul><li><p><code>stratum</code>.</p></li>
<li><p><code>enroll_time</code>: Enrollment time for the observation.</p></li>
<li><p><code>Treatment</code>: Treatment group; this will be one of the values
in the input <code>block</code>.</p></li>
<li><p><code>fail_time</code>: Failure time generated using <code><a href="rpwexp.html">rpwexp()</a></code>.</p></li>
<li><p><code>dropout_time</code>: Dropout time generated using <code><a href="rpwexp.html">rpwexp()</a></code>.</p></li>
<li><p><code>cte</code>: Calendar time of enrollment plot the minimum of
failure time and dropout time.</p></li>
<li><p><code>fail</code>: Indicator that <code>cte</code> was set using failure time;
i.e., 1 is a failure, 0 is a dropout.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1</span></span></span>
<span class="r-in"><span><span class="fu">sim_pw_surv</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum enroll_time    treatment  fail_time dropout_time        cte fail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      All   0.1169701      control  2.3522782   726.236246  2.4692483    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      All   0.1655561 experimental  7.2130199  1375.314370  7.3785759    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      All   0.2203226      control  5.2816125   279.355397  5.5019351    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      All   0.4589592 experimental  4.5824607    11.342590  5.0414199    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      All   0.5161879 experimental  0.3408276    98.581064  0.8570155    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      All   0.5525417 experimental 48.4943098  3940.428363 49.0468516    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      All   0.6023998      control  7.9020486  1506.827622  8.5044484    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      All   0.7313558      control  5.3501473     8.859702  6.0815032    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      All   0.8013719 experimental  4.6297940   591.700214  5.4311659    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     All   0.8438567      control  1.7559011    20.478716  2.5997577    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     All   0.8919483      control  5.2311790   151.951748  6.1231272    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     All   0.9181567 experimental 25.3045387  1074.127307 26.2226954    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     All   1.0548415      control 20.0464765  1420.826969 21.1013180    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     All   1.2705991 experimental  8.2785049   460.908456  9.5491040    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     All   1.2920275 experimental  1.6351292   480.784251  2.9271566    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     All   1.2945163      control 11.2924970   459.922500 12.5870132    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     All   1.3919213 experimental 19.0080405    80.189760 20.3999618    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     All   1.6078178      control 10.0045280   295.652900 11.6123458    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     All   1.6174817      control  6.2319115   255.661979  7.8493933    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     All   1.6770953 experimental  0.7551894   278.421726  2.4322847    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2</span></span></span>
<span class="r-in"><span><span class="co"># 3:1 randomization</span></span></span>
<span class="r-in"><span><span class="fu">sim_pw_surv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  block <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"control"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum enroll_time    treatment  fail_time dropout_time       cte fail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      All   0.0701005 experimental 67.0221105    1602.5241 67.092211    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      All   0.3138125 experimental 23.9737611     189.7320 24.287574    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      All   0.4815617      control  8.9365213     847.8221  9.418083    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      All   0.7462000 experimental 20.2543626     699.6371 21.000563    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      All   0.9607707 experimental 53.8871321     706.7815 54.847903    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      All   1.0511800      control  0.1715598     255.8370  1.222740    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      All   1.1067745 experimental 38.1885083    1101.2561 39.295283    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      All   1.2658658 experimental 77.1229067    1447.0174 78.388772    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      All   1.3559820      control  6.5343971     742.2296  7.890379    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     All   1.3676125 experimental 58.7567835     251.6071 60.124396    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     All   1.3691043 experimental 38.8468048     481.0761 40.215909    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     All   1.4535872 experimental 13.4139827     596.6599 14.867570    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     All   1.4727922 experimental  1.3089880    1697.0029  2.781780    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     All   1.7945164 experimental 17.3633287    4614.3631 19.157845    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     All   1.8293592 experimental 10.5662550      86.2281 12.395614    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     All   1.8558251      control 10.2177042     685.6568 12.073529    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     All   1.8972873 experimental  2.6178723    1819.2595  4.515160    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     All   1.9490709 experimental  3.4084081     289.6376  5.357479    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     All   1.9615621      control 51.0259561    1134.6053 52.987518    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     All   2.0864015 experimental  2.3365045     384.2175  4.422906    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3</span></span></span>
<span class="r-in"><span><span class="co"># Simulate 2 stratum; will use defaults for blocking and enrollRates</span></span></span>
<span class="r-in"><span><span class="fu">sim_pw_surv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  <span class="co"># 2 stratum,30% and 70% prevalence</span></span></span>
<span class="r-in"><span>  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"High"</span><span class="op">)</span>, p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.3</span>, <span class="fl">.7</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"High"</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.03</span>, <span class="fl">.05</span>, <span class="fl">.03</span>, <span class="fl">.03</span>, <span class="fl">.05</span>, <span class="fl">.08</span>, <span class="fl">.07</span>, <span class="fl">.04</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  dropout_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"High"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"experimental"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">.001</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum enroll_time    treatment  fail_time dropout_time       cte fail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     High   0.1863179 experimental  8.5527734    437.33867  8.739091    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Low   0.3170170      control 69.3565466    513.65581 69.673564    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      Low   0.3427688 experimental 23.3040655    485.16067 23.646834    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     High   0.3664647      control  4.1008854    790.71037  4.467350    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Low   0.6836981      control 23.9110679   1164.23533 24.594766    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     High   0.7075722      control 17.5605004    397.54149 18.268073    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      Low   0.7807614 experimental 26.2864537    475.16192 27.067215    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     High   0.8097265 experimental  0.1926551     43.34721  1.002382    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     High   0.8122659 experimental 15.0456185   4174.94331 15.857884    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     Low   1.4281633 experimental 12.7370848   1625.11183 14.165248    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    High   1.4808871 experimental 20.2331348    465.29175 21.714022    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    High   1.5638285      control 23.0282302    759.05162 24.592059    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    High   1.6907687      control 11.6284285   1004.53947 13.319197    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14    High   1.7629898 experimental  4.1098911   2189.41244  5.872881    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    High   1.9106687      control  6.7833167    494.34540  8.693985    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     Low   2.1112185 experimental  4.4710497   1487.11764  6.582268    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    High   2.2452636      control 29.7332577     21.84553 24.090796    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18    High   2.4984987 experimental  1.8322780    361.39980  4.330777    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     Low   2.8414901      control 41.3615037   2212.00385 44.202994    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20    High   3.0451995 experimental  0.8167457   3357.73901  3.861945    1</span>
<span class="r-in"><span><span class="co"># Example 4</span></span></span>
<span class="r-in"><span><span class="co"># If you want a more rectangular entry for a data.frame</span></span></span>
<span class="r-in"><span><span class="va">fail_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"control"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.03</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.03</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">2</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.02</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"control"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.05</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.06</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">2</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.03</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dropout_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"control"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"Low"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"control"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.001</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"High"</span>, period <span class="op">=</span> <span class="fl">1</span>, treatment <span class="op">=</span> <span class="st">"experimental"</span>, duration <span class="op">=</span> <span class="fl">3</span>, rate <span class="op">=</span> <span class="fl">.001</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">sim_pw_surv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"High"</span><span class="op">)</span>, p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.3</span>, <span class="fl">.7</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  dropout_rate <span class="op">=</span> <span class="va">dropout_rate</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    stratum enroll_time    treatment   fail_time dropout_time        cte fail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      Low   0.0734264 experimental  19.8074367     65.86452  19.880863    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     High   0.1289682      control   9.4633770   1250.15328   9.592345    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     High   0.1502559 experimental   5.3931730   2506.43240   5.543429    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Low   0.4075359      control   0.2998111    347.07976   0.707347    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     High   0.5873042 experimental   8.2992292    645.75643   8.886533    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      Low   0.6447172 experimental  68.4701859    875.86457  69.114903    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      Low   0.7176320      control  53.4130441    803.69807  54.130676    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      Low   1.2571982 experimental 181.0733138    465.17781 182.330512    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     High   1.3182567      control  31.2547073   2963.64946  32.572964    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     Low   1.4377561 experimental  54.9043285    723.83802  56.342085    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    High   1.6384161      control  27.0443860    403.53936  28.682802    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    High   1.7007771 experimental   8.5890783   1027.30887  10.289855    1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Keaven Anderson, Yilong Zhang, Yujie Zhao. Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. <br>Copyright © 2023 Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p><span></span></p>
</div>

    </footer></div>

  

  

  </body></html>

