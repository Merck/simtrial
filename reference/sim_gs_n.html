<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate group sequential designs with fixed sample size — sim_gs_n • simtrial</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet"><script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Simulate group sequential designs with fixed sample size — sim_gs_n"><meta name="description" content='This function uses the option "stop" for the error-handling behavior of the
foreach loop. This will cause the entire function to stop when errors are
encountered and return the first error encountered instead of returning
errors for each individual simulation.'><meta property="og:description" content='This function uses the option "stop" for the error-handling behavior of the
foreach loop. This will cause the entire function to stop when errors are
encountered and return the first error encountered instead of returning
errors for each individual simulation.'><meta property="og:image" content="https://merck.github.io/simtrial/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">simtrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Merck/simtrial/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate group sequential designs with fixed sample size</h1>
      <small class="dont-index">Source: <a href="https://github.com/Merck/simtrial/blob/main/R/sim_gs_n.R" class="external-link"><code>R/sim_gs_n.R</code></a></small>
      <div class="d-none name"><code>sim_gs_n.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function uses the option "stop" for the error-handling behavior of the
foreach loop. This will cause the entire function to stop when errors are
encountered and return the first error encountered instead of returning
errors for each individual simulation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_gs_n</span><span class="op">(</span></span>
<span>  n_sim <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  sample_size <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"All"</span>, p <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  enroll_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span>, rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"All"</span>, duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">100</span><span class="op">)</span>, fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>,</span>
<span>    <span class="fl">18</span><span class="op">)</span>, hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">0.6</span><span class="op">)</span>, dropout_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  block <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="st">"control"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  test <span class="op">=</span> <span class="va">wlr</span>,</span>
<span>  cut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n-sim">n_sim<a class="anchor" aria-label="anchor" href="#arg-n-sim"></a></dt>
<dd><p>Number of simulations to perform.</p></dd>


<dt id="arg-sample-size">sample_size<a class="anchor" aria-label="anchor" href="#arg-sample-size"></a></dt>
<dd><p>Total sample size per simulation.</p></dd>


<dt id="arg-stratum">stratum<a class="anchor" aria-label="anchor" href="#arg-stratum"></a></dt>
<dd><p>A data frame with stratum specified in <code>stratum</code>,
probability (incidence) of each stratum in <code>p</code>.</p></dd>


<dt id="arg-enroll-rate">enroll_rate<a class="anchor" aria-label="anchor" href="#arg-enroll-rate"></a></dt>
<dd><p>Piecewise constant enrollment rates by time period.
Note that these are overall population enrollment rates and the <code>stratum</code>
argument controls the random distribution between stratum.</p></dd>


<dt id="arg-fail-rate">fail_rate<a class="anchor" aria-label="anchor" href="#arg-fail-rate"></a></dt>
<dd><p>Piecewise constant control group failure rates, hazard ratio
for experimental vs. control, and dropout rates by stratum and time period.</p></dd>


<dt id="arg-block">block<a class="anchor" aria-label="anchor" href="#arg-block"></a></dt>
<dd><p>As in <code><a href="sim_pw_surv.html">sim_pw_surv()</a></code>. Vector of treatments to be included
in each block.</p></dd>


<dt id="arg-test">test<a class="anchor" aria-label="anchor" href="#arg-test"></a></dt>
<dd><p>One or more test functions such as <code><a href="wlr.html">wlr()</a></code>, <code><a href="rmst.html">rmst()</a></code>, or
<code><a href="milestone.html">milestone()</a></code> (<code><a href="maxcombo.html">maxcombo()</a></code> can only be applied by itself). If a single
test function is provided, it will be applied at each cut. Alternatively a
list of functions created by <code><a href="create_test.html">create_test()</a></code>. The list form is experimental
and currently limited. It only accepts one test per cutting (in the future
multiple tests may be accepted), and all the tests must consistently return
the same exact results (again this may be more flexible in the future).
Importantly, note that the simulated data set is always passed as the first
positional argument to each test function provided.</p></dd>


<dt id="arg-cut">cut<a class="anchor" aria-label="anchor" href="#arg-cut"></a></dt>
<dd><p>A list of cutting functions created by <code><a href="create_cut.html">create_cut()</a></code>, see
examples.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed to the test function(s) provided by the argument
<code>test</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame summarizing the simulation ID, analysis date,
z statistics or p-values.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>WARNING: This experimental function is a work-in-progress. The function
arguments will change as we add additional features.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://merck.github.io/gsDesign2/" class="external-link">gsDesign2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters for enrollment</span></span></span>
<span class="r-in"><span><span class="va">enroll_rampup_duration</span> <span class="op">&lt;-</span> <span class="fl">4</span> <span class="co"># Duration for enrollment ramp up</span></span></span>
<span class="r-in"><span><span class="va">enroll_duration</span> <span class="op">&lt;-</span> <span class="fl">16</span> <span class="co"># Total enrollment duration</span></span></span>
<span class="r-in"><span><span class="va">enroll_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://merck.github.io/gsDesign2/reference/define_enroll_rate.html" class="external-link">define_enroll_rate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">enroll_rampup_duration</span>,</span></span>
<span class="r-in"><span>    <span class="va">enroll_duration</span> <span class="op">-</span> <span class="va">enroll_rampup_duration</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters for treatment effect</span></span></span>
<span class="r-in"><span><span class="va">delay_effect_duration</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="co"># Delay treatment effect in months</span></span></span>
<span class="r-in"><span><span class="va">median_ctrl</span> <span class="op">&lt;-</span> <span class="fl">9</span> <span class="co"># Survival median of the control arm</span></span></span>
<span class="r-in"><span><span class="va">median_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">14</span><span class="op">)</span> <span class="co"># Survival median of the experimental arm</span></span></span>
<span class="r-in"><span><span class="va">dropout_rate</span> <span class="op">&lt;-</span> <span class="fl">0.001</span></span></span>
<span class="r-in"><span><span class="va">fail_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://merck.github.io/gsDesign2/reference/define_fail_rate.html" class="external-link">define_fail_rate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">delay_effect_duration</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="va">median_ctrl</span>,</span></span>
<span class="r-in"><span>  hr <span class="op">=</span> <span class="va">median_ctrl</span> <span class="op">/</span> <span class="va">median_exp</span>,</span></span>
<span class="r-in"><span>  dropout_rate <span class="op">=</span> <span class="va">dropout_rate</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Other related parameters</span></span></span>
<span class="r-in"><span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.025</span> <span class="co"># Type I error</span></span></span>
<span class="r-in"><span><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fl">0.1</span> <span class="co"># Type II error</span></span></span>
<span class="r-in"><span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># Randomization ratio (experimental:control)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define cuttings of 2 IAs and 1 FA</span></span></span>
<span class="r-in"><span><span class="co"># IA1</span></span></span>
<span class="r-in"><span><span class="co"># The 1st interim analysis will occur at the later of the following 3 conditions:</span></span></span>
<span class="r-in"><span><span class="co"># - At least 20 months have passed since the start of the study.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 100 events have occurred.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 20 months have elapsed after enrolling 200/400 subjects, with a</span></span></span>
<span class="r-in"><span><span class="co">#   minimum of 20 months follow-up.</span></span></span>
<span class="r-in"><span><span class="co"># However, if events accumulation is slow, we will wait for a maximum of 24 months.</span></span></span>
<span class="r-in"><span><span class="va">ia1_cut</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_cut.html">create_cut</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  planned_calendar_time <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  target_event_overall <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  max_extension_for_target_event <span class="op">=</span> <span class="fl">24</span>,</span></span>
<span class="r-in"><span>  min_n_overall <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>  min_followup <span class="op">=</span> <span class="fl">20</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># IA2</span></span></span>
<span class="r-in"><span><span class="co"># The 2nd interim analysis will occur at the later of the following 3 conditions:</span></span></span>
<span class="r-in"><span><span class="co"># - At least 32 months have passed since the start of the study.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 250 events have occurred.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 10 months after IA1.</span></span></span>
<span class="r-in"><span><span class="co"># However, if events accumulation is slow, we will wait for a maximum of 34 months.</span></span></span>
<span class="r-in"><span><span class="va">ia2_cut</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_cut.html">create_cut</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  planned_calendar_time <span class="op">=</span> <span class="fl">32</span>,</span></span>
<span class="r-in"><span>  target_event_overall <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>  max_extension_for_target_event <span class="op">=</span> <span class="fl">34</span>,</span></span>
<span class="r-in"><span>  min_time_after_previous_analysis <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># FA</span></span></span>
<span class="r-in"><span><span class="co"># The final analysis will occur at the later of the following 2 conditions:</span></span></span>
<span class="r-in"><span><span class="co"># - At least 45 months have passed since the start of the study.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 300 events have occurred.</span></span></span>
<span class="r-in"><span><span class="va">fa_cut</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_cut.html">create_cut</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  planned_calendar_time <span class="op">=</span> <span class="fl">45</span>,</span></span>
<span class="r-in"><span>  target_event_overall <span class="op">=</span> <span class="fl">350</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 1: regular logrank test at all 3 analyses</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Backend uses sequential processing.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sim_id method          parameter analysis cut_date   n event  estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1    WLR FH(rho=0, gamma=0)        1 24.00000 400   250 -12.57078</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1    WLR FH(rho=0, gamma=0)        2 32.00000 400   310 -17.51259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1    WLR FH(rho=0, gamma=0)        3 45.00000 400   358 -21.52904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2    WLR FH(rho=0, gamma=0)        1 24.00000 400   220 -19.00067</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2    WLR FH(rho=0, gamma=0)        2 32.00000 400   293 -24.11786</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2    WLR FH(rho=0, gamma=0)        3 48.45114 400   350 -28.11068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3    WLR FH(rho=0, gamma=0)        1 24.00000 400   230 -31.62822</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3    WLR FH(rho=0, gamma=0)        2 32.00000 400   293 -45.31045</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3    WLR FH(rho=0, gamma=0)        3 46.46267 400   350 -46.75292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         se         z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 7.887852 -1.593688</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 8.772686 -1.996264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 9.344122 -2.304019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 7.405081 -2.565896</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 8.519054 -2.831049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 9.268839 -3.032816</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 7.505597 -4.213951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 8.380172 -5.406863</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 8.995231 -5.197523</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: weighted logrank test by FH(0, 0.5) at all 3 analyses</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Backend uses sequential processing.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sim_id method            parameter analysis cut_date   n event  estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1    WLR FH(rho=0, gamma=0.5)        1 24.00000 400   245 -16.50548</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1    WLR FH(rho=0, gamma=0.5)        2 32.00000 400   301 -23.42510</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1    WLR FH(rho=0, gamma=0.5)        3 48.63895 400   350 -29.26789</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2    WLR FH(rho=0, gamma=0.5)        1 24.00000 400   235 -11.77665</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2    WLR FH(rho=0, gamma=0.5)        2 32.00000 400   306 -19.93688</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2    WLR FH(rho=0, gamma=0.5)        3 45.00000 400   354 -21.77563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3    WLR FH(rho=0, gamma=0.5)        1 24.00000 400   251 -10.39589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3    WLR FH(rho=0, gamma=0.5)        2 32.00000 400   311 -15.69293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3    WLR FH(rho=0, gamma=0.5)        3 45.00000 400   351 -23.93377</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         se         z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 4.328381 -3.813315</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 5.228555 -4.480225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 5.941521 -4.925993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 4.197528 -2.805615</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 5.343826 -3.730824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 6.075010 -3.584461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 4.461681 -2.330039</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 5.461761 -2.873236</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 6.040813 -3.962012</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: weighted logrank test by MB(3) at all 3 analyses</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="mb.html">mb</a></span><span class="op">(</span>delay <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Backend uses sequential processing.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sim_id method                       parameter analysis cut_date   n event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1    WLR MB(delay = 3, max_weight = Inf)        1 24.00000 400   238</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1    WLR MB(delay = 3, max_weight = Inf)        2 32.00000 400   302</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1    WLR MB(delay = 3, max_weight = Inf)        3 47.15475 400   350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2    WLR MB(delay = 3, max_weight = Inf)        1 24.00000 400   237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2    WLR MB(delay = 3, max_weight = Inf)        2 32.00000 400   303</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2    WLR MB(delay = 3, max_weight = Inf)        3 45.20750 400   350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3    WLR MB(delay = 3, max_weight = Inf)        1 24.00000 400   243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3    WLR MB(delay = 3, max_weight = Inf)        2 32.00000 400   313</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3    WLR MB(delay = 3, max_weight = Inf)        3 45.00000 400   357</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    estimate        se         z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -18.60515  9.225778 -2.016648</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -33.00297 10.453127 -3.157234</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 -39.37570 11.182331 -3.521243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -34.44971  9.123798 -3.775808</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 -33.74696 10.343061 -3.262763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 -39.16912 11.112993 -3.524624</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 -11.15905  9.490882 -1.175765</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 -24.41722 10.826117 -2.255400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 -20.40203 11.597863 -1.759119</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4: weighted logrank test by early zero (6) at all 3 analyses</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="early_zero.html">early_zero</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Backend uses sequential processing.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sim_id method                                parameter analysis cut_date   n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1    WLR Xu 2017 with first 6 months of 0 weights        1 24.00000 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1    WLR Xu 2017 with first 6 months of 0 weights        2 32.00000 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1    WLR Xu 2017 with first 6 months of 0 weights        3 47.13787 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2    WLR Xu 2017 with first 6 months of 0 weights        1 24.00000 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2    WLR Xu 2017 with first 6 months of 0 weights        2 32.00000 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2    WLR Xu 2017 with first 6 months of 0 weights        3 45.00000 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3    WLR Xu 2017 with first 6 months of 0 weights        1 24.00000 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3    WLR Xu 2017 with first 6 months of 0 weights        2 32.00000 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3    WLR Xu 2017 with first 6 months of 0 weights        3 45.00000 400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   event   estimate       se          z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   237 -18.920929 4.895593 -3.8648903</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   292 -21.572976 6.083195 -3.5463235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   350 -22.773420 7.128240 -3.1948166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   228  -3.935264 4.452137 -0.8839045</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   302 -15.029990 6.131008 -2.4514713</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   356 -20.604103 7.031002 -2.9304649</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   232 -18.075149 4.637207 -3.8978528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   296 -23.442295 6.003295 -3.9049051</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   355 -33.405996 6.903375 -4.8390814</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 5: RMST at all 3 analyses</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">rmst</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  tau <span class="op">=</span> <span class="fl">20</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Backend uses sequential processing.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sim_id method parameter analysis cut_date   n event estimate        se</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1   RMST        20        1 24.00000 400   219 1.851347 0.7877281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1   RMST        20        2 32.00000 400   289 1.580564 0.7638273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1   RMST        20        3 48.05091 400   350 1.585474 0.7629744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2   RMST        20        1 24.00000 400   246 2.586267 0.7527348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2   RMST        20        2 32.00000 400   312 2.587050 0.7150500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2   RMST        20        3 45.00000 400   359 2.584614 0.7151244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3   RMST        20        1 24.00000 400   255 1.073489 0.7554547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3   RMST        20        2 32.00000 400   307 1.093229 0.7386015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3   RMST        20        3 45.73872 400   350 1.078624 0.7385753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2.350235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2.069269</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2.078017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 3.435827</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 3.617999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 3.614216</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 1.420985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 1.480133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 1.460411</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 6: Milestone at all 3 analyses</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">milestone</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ms_time <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Backend uses sequential processing.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sim_id    method parameter analysis cut_date   n event   estimate         se</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1 milestone        10        1 24.00000 400   246 -0.1580116 -0.2046565</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1 milestone        10        2 32.00000 400   303 -0.1795608 -0.2023293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1 milestone        10        3 45.82652 400   350 -0.1795608 -0.2023293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2 milestone        10        1 24.00000 400   224 -0.2113400 -0.2167477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2 milestone        10        2 32.00000 400   294 -0.2024538 -0.2108511</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2 milestone        10        3 49.28090 400   350 -0.2024538 -0.2108511</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3 milestone        10        1 24.00000 400   236 -0.5697039 -0.2135076</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3 milestone        10        2 32.00000 400   302 -0.5343102 -0.2099509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3 milestone        10        3 45.00000 400   353 -0.5343102 -0.2099509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.7720819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.8874681</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.8874681</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.9750508</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.9601742</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.9601742</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 2.6683079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 2.5449295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 2.5449295</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 7: WLR with fh(0, 0.5) test at IA1,</span></span></span>
<span class="r-in"><span><span class="co"># WLR with mb(6, Inf) at IA2, and milestone test at FA</span></span></span>
<span class="r-in"><span><span class="va">ia1_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">wlr</span>, weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ia2_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">wlr</span>, weight <span class="op">=</span> <span class="fu"><a href="mb.html">mb</a></span><span class="op">(</span>delay <span class="op">=</span> <span class="fl">6</span>, w_max <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fa_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">milestone</span>, ms_time <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_test</span>, ia2 <span class="op">=</span> <span class="va">ia2_test</span>, fa <span class="op">=</span> <span class="va">fa_test</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Backend uses sequential processing.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sim_id    method                       parameter analysis cut_date   n event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1       WLR            FH(rho=0, gamma=0.5)        1 24.00000 400   248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1       WLR MB(delay = 6, max_weight = Inf)        2 32.00000 400   297</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1 milestone                              10        3 49.48058 400   350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2       WLR            FH(rho=0, gamma=0.5)        1 24.00000 400   252</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2       WLR MB(delay = 6, max_weight = Inf)        2 32.00000 400   311</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2 milestone                              10        3 45.00000 400   365</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3       WLR            FH(rho=0, gamma=0.5)        1 24.00000 400   244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      3       WLR MB(delay = 6, max_weight = Inf)        2 32.00000 400   309</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3 milestone                              10        3 45.82981 400   350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       estimate         se           z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -13.78234631  4.3793693 -3.14710756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 -47.46538141 12.0117545 -3.95157772</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.41454328 -0.2087021  1.98629213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 -13.28163012  4.4426839 -2.98955097</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 -43.87975088 12.2778274 -3.57390190</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  -0.23674152 -0.2017884  1.17321666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  -4.22376180  4.3541798 -0.97004763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 -20.58200097 12.3933664 -1.66072722</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  -0.01699849 -0.2046045  0.08307974</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># WARNING: Multiple tests per cut will be enabled in a future version.</span></span></span>
<span class="r-in"><span><span class="co">#          Currently does not work.</span></span></span>
<span class="r-in"><span><span class="co"># Example 8: At IA1, we conduct 3 tests, LR, WLR with fh(0, 0.5), and RMST test.</span></span></span>
<span class="r-in"><span><span class="co"># At IA2, we conduct 2 tests, LR and WLR with early zero (6).</span></span></span>
<span class="r-in"><span><span class="co"># At FA, we conduct 2 tests, LR and milestone test.</span></span></span>
<span class="r-in"><span><span class="va">ia1_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  test1 <span class="op">=</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">wlr</span>, weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  test2 <span class="op">=</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">wlr</span>, weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  test3 <span class="op">=</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">rmst</span>, tau <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ia2_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  test1 <span class="op">=</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">wlr</span>, weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  test2 <span class="op">=</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">wlr</span>, weight <span class="op">=</span> <span class="fu"><a href="early_zero.html">early_zero</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fa_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  test1 <span class="op">=</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">wlr</span>, weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  test3 <span class="op">=</span> <span class="fu"><a href="create_test.html">create_test</a></span><span class="op">(</span><span class="va">milestone</span>, ms_time <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_test</span>, ia2 <span class="op">=</span> <span class="va">ia2_test</span>, fa <span class="op">=</span> <span class="va">fa_test</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 9: regular logrank test at all 3 analyses in parallel</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="st">"multisession"</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1_cut</span>, ia2 <span class="op">=</span> <span class="va">ia2_cut</span>, fa <span class="op">=</span> <span class="va">fa_cut</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="st">"sequential"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson, Yujie Zhao, Yilong Zhang. Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0. <br>Copyright © 2024 Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved.</p>
</div>

<div class="pkgdown-footer-right">
  <p><span></span></p>
</div>

    </footer></div>





  </body></html>

