<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="WARNING: This experimental function is a work-in-progress. The function
arguments will change as we add additional features."><title>Simulate group sequential designs with fixed sample size — sim_gs_n • simtrial</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Simulate group sequential designs with fixed sample size — sim_gs_n"><meta property="og:description" content="WARNING: This experimental function is a work-in-progress. The function
arguments will change as we add additional features."><meta property="og:image" content="https://merck.github.io/simtrial/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">simtrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Merck/simtrial/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate group sequential designs with fixed sample size</h1>
      <small class="dont-index">Source: <a href="https://github.com/Merck/simtrial/blob/HEAD/R/sim_gs_n.R" class="external-link"><code>R/sim_gs_n.R</code></a></small>
      <div class="d-none name"><code>sim_gs_n.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>WARNING: This experimental function is a work-in-progress. The function
arguments will change as we add additional features.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_gs_n</span><span class="op">(</span></span>
<span>  n_sim <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  sample_size <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"All"</span>, p <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  enroll_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span>, rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>stratum <span class="op">=</span> <span class="st">"All"</span>, duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">100</span><span class="op">)</span>, fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>,</span>
<span>    <span class="fl">18</span><span class="op">)</span>, hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">0.6</span><span class="op">)</span>, dropout_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  block <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"experimental"</span>, <span class="st">"control"</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  test <span class="op">=</span> <span class="va">wlr</span>,</span>
<span>  cut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>n_sim</dt>
<dd><p>Number of simulations to perform.</p></dd>


<dt>sample_size</dt>
<dd><p>Total sample size per simulation.</p></dd>


<dt>stratum</dt>
<dd><p>A data frame with stratum specified in <code>stratum</code>,
probability (incidence) of each stratum in <code>p</code>.</p></dd>


<dt>enroll_rate</dt>
<dd><p>Piecewise constant enrollment rates by time period.
Note that these are overall population enrollment rates and the <code>stratum</code>
argument controls the random distribution between stratum.</p></dd>


<dt>fail_rate</dt>
<dd><p>Piecewise constant control group failure rates, hazard ratio
for experimental vs. control, and dropout rates by stratum and time period.</p></dd>


<dt>block</dt>
<dd><p>As in <code><a href="sim_pw_surv.html">sim_pw_surv()</a></code>. Vector of treatments to be included
in each block.</p></dd>


<dt>test</dt>
<dd><p>One or more test functions such as <code><a href="wlr.html">wlr()</a></code>, <code><a href="maxcombo.html">maxcombo()</a></code>, or
<code><a href="rmst.html">rmst()</a></code>. If a single test function is provided, it will be applied at each
cut. Alternatively a list of functions created by <code><a href="create_test.html">create_test()</a></code>. The list
form is experimental and currently limited. It only accepts one test per
cutting (in the future multiple tests may be accepted), and all the tests
must consistently return the same exact results (again this may be more
flexible in the future). Importantly, note that the simulated data set is
always passed as the first positional argument to each test function
provided.</p></dd>


<dt>cut</dt>
<dd><p>A list of cutting functions created by <code><a href="create_cut.html">create_cut()</a></code>, see
examples.</p></dd>


<dt>seed</dt>
<dd><p>Random seed.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed to the test function(s) provided by the argument
<code>test</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame summarizing the simulation ID, analysis date,
z statistics or p-values.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://merck.github.io/gsDesign2/" class="external-link">gsDesign2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters for enrollment</span></span></span>
<span class="r-in"><span><span class="va">enroll_rampup_duration</span> <span class="op">&lt;-</span> <span class="fl">4</span> <span class="co"># Duration for enrollment ramp up</span></span></span>
<span class="r-in"><span><span class="va">enroll_duration</span> <span class="op">&lt;-</span> <span class="fl">16</span> <span class="co"># Total enrollment duration</span></span></span>
<span class="r-in"><span><span class="va">enroll_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://merck.github.io/gsDesign2/reference/define_enroll_rate.html" class="external-link">define_enroll_rate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">enroll_rampup_duration</span>,</span></span>
<span class="r-in"><span>    <span class="va">enroll_duration</span> <span class="op">-</span> <span class="va">enroll_rampup_duration</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters for treatment effect</span></span></span>
<span class="r-in"><span><span class="va">delay_effect_duration</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="co"># Delay treatment effect in months</span></span></span>
<span class="r-in"><span><span class="va">median_ctrl</span> <span class="op">&lt;-</span> <span class="fl">9</span> <span class="co"># Survival median of the control arm</span></span></span>
<span class="r-in"><span><span class="va">median_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">14</span><span class="op">)</span> <span class="co"># Survival median of the experimental arm</span></span></span>
<span class="r-in"><span><span class="va">dropout_rate</span> <span class="op">&lt;-</span> <span class="fl">0.001</span></span></span>
<span class="r-in"><span><span class="va">fail_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://merck.github.io/gsDesign2/reference/define_fail_rate.html" class="external-link">define_fail_rate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">delay_effect_duration</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="va">median_ctrl</span>,</span></span>
<span class="r-in"><span>  hr <span class="op">=</span> <span class="va">median_ctrl</span> <span class="op">/</span> <span class="va">median_exp</span>,</span></span>
<span class="r-in"><span>  dropout_rate <span class="op">=</span> <span class="va">dropout_rate</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Other related parameters</span></span></span>
<span class="r-in"><span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.025</span> <span class="co"># Type I error</span></span></span>
<span class="r-in"><span><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fl">0.1</span> <span class="co"># Type II error</span></span></span>
<span class="r-in"><span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># Randomization ratio (experimental:control)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define cuttings of 2 IAs and 1 FA</span></span></span>
<span class="r-in"><span><span class="co"># IA1</span></span></span>
<span class="r-in"><span><span class="co"># The 1st interim analysis will occur at the later of the following 3 conditions:</span></span></span>
<span class="r-in"><span><span class="co"># - At least 20 months have passed since the start of the study.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 100 events have occurred.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 20 months have elapsed after enrolling 200/400 subjects, with a</span></span></span>
<span class="r-in"><span><span class="co">#   minimum of 20 months follow-up.</span></span></span>
<span class="r-in"><span><span class="co"># However, if events accumulation is slow, we will wait for a maximum of 24 months.</span></span></span>
<span class="r-in"><span><span class="va">ia1</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_cut.html">create_cut</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  planned_calendar_time <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  target_event_overall <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  max_extension_for_target_event <span class="op">=</span> <span class="fl">24</span>,</span></span>
<span class="r-in"><span>  min_n_overall <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>  min_followup <span class="op">=</span> <span class="fl">20</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># IA2</span></span></span>
<span class="r-in"><span><span class="co"># The 2nd interim analysis will occur at the later of the following 3 conditions:</span></span></span>
<span class="r-in"><span><span class="co"># - At least 32 months have passed since the start of the study.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 250 events have occurred.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 10 months after IA1.</span></span></span>
<span class="r-in"><span><span class="co"># However, if events accumulation is slow, we will wait for a maximum of 34 months.</span></span></span>
<span class="r-in"><span><span class="va">ia2</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_cut.html">create_cut</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  planned_calendar_time <span class="op">=</span> <span class="fl">32</span>,</span></span>
<span class="r-in"><span>  target_event_overall <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>  max_extension_for_target_event <span class="op">=</span> <span class="fl">34</span>,</span></span>
<span class="r-in"><span>  min_time_after_previous_analysis <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># FA</span></span></span>
<span class="r-in"><span><span class="co"># The final analysis will occur at the later of the following 2 conditions:</span></span></span>
<span class="r-in"><span><span class="co"># - At least 45 months have passed since the start of the study.</span></span></span>
<span class="r-in"><span><span class="co"># - At least 300 events have occurred.</span></span></span>
<span class="r-in"><span><span class="va">fa</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_cut.html">create_cut</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  planned_calendar_time <span class="op">=</span> <span class="fl">45</span>,</span></span>
<span class="r-in"><span>  target_event_overall <span class="op">=</span> <span class="fl">350</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 1: regular logrank test</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              method parameter            estimation se       z         analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -28.19483  7.521418 -3.748605 1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -38.32581  8.459808 -4.53034  2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -39.4923   9.149248 -4.316453 3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -26.84871  7.721484 -3.477144 1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -32.54824  8.42531  -3.86315  2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -30.06631  9.172772 -3.277778 3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -23.06302  7.498065 -3.075863 1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -30.1633   8.33391  -3.619345 2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0)" -38.75506  9.178027 -4.222592 3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              cut_date sim_id n   event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       1      400 229  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       1      400 295  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 45       1      400 355  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       2      400 241  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       2      400 290  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 46.21933 2      400 350  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       3      400 226  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       3      400 282  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 50.86585 3      400 350  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 2: weighted logrank test by FH(0, 0.5)</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              method parameter              estimation se       z        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -16.93422  4.081359 -4.149161</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -24.44818  5.116707 -4.778108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -25.51076  5.987416 -4.26073 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -15.50024  4.299539 -3.605093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -19.96769  5.061414 -3.945081</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -17.53906  6.008214 -2.91918 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -12.66462  4.029178 -3.143228</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -18.05051  4.958307 -3.640459</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "FH(rho=0, gamma=0.5)" -25.59217  6.031211 -4.243289</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              analysis cut_date sim_id n   event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 1        24       1      400 229  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 2        32       1      400 295  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 3        45       1      400 355  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 1        24       2      400 241  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 2        32       2      400 290  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 3        46.21933 2      400 350  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 1        24       3      400 226  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 2        32       3      400 282  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 3        50.86585 3      400 350  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 3: weighted logrank test by MB(3)</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="mb.html">mb</a></span><span class="op">(</span>delay <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              method parameter                         estimate  se      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -34.19243 9.004801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -46.74548 10.20347</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -48.19085 11.07926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -32.19277 9.194961</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -39.18612 10.08251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -36.14078 11.02093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -27.89564 8.957908</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -36.66946 10.0225 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "MB(delay = 3, max_weight = Inf)" -47.28631 11.09153</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              z         analysis cut_date sim_id n   event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -3.797134 1        24       1      400 229  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -4.581331 2        32       1      400 295  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -4.349644 3        45       1      400 355  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -3.501131 1        24       2      400 241  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -3.886542 2        32       2      400 290  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -3.279286 3        46.21933 2      400 350  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -3.114079 1        24       3      400 226  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -3.658715 2        32       3      400 282  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new -4.263279 3        50.86585 3      400 350  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 4: weighted logrank test by early zero (6)</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">wlr</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="early_zero.html">early_zero</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              method parameter                                  estimate </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -21.99899</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -32.12997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -33.29646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -17.19941</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -22.89893</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -20.41701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -11.77606</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -18.87634</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "WLR"  "Xu 2017 with first 6 months of 0 weights" -27.4681 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              se       z         analysis cut_date sim_id n   event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 4.832164 -4.552617 1        24       1      400 229  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 6.192449 -5.188573 2        32       1      400 295  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 7.105407 -4.686074 3        45       1      400 355  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 5.399223 -3.185533 1        24       2      400 241  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 6.36523  -3.597503 2        32       2      400 290  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 7.325985 -2.78693  3        46.21933 2      400 350  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 4.974376 -2.367344 1        24       3      400 226  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 6.162588 -3.063054 2        32       3      400 282  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 7.263581 -3.781619 3        50.86585 3      400 350  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 5: RMST</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">rmst</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  tau <span class="op">=</span> <span class="fl">20</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              method parameter estimation se        z        analysis cut_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.881152   0.760202  3.789982 1        24      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.853131   0.7147367 3.991863 2        32      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.834508   0.7121699 3.980101 3        45      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.56739    0.7388451 3.474869 1        24      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.399692   0.7282783 3.295021 2        32      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.368335   0.727797  3.254115 3        46.21933</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.287498   0.7674791 2.980534 1        24      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.448117   0.7416398 3.300952 2        32      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "RMST" 20        2.478942   0.7398877 3.35043  3        50.86585</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              sim_id n   event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 1      400 229  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 1      400 295  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 1      400 355  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 2      400 241  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 2      400 290  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 2      400 350  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 3      400 226  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 3      400 282  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 3      400 350  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 6: Milestone</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">milestone</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  ms_time <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              method      parameter estimation se         z        analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.4635636 -0.2151203 2.154904 1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.5093608 -0.2066913 2.464355 2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.5093608 -0.2066913 2.464355 3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.3605499 -0.2158065 1.670709 1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.3487338 -0.2107879 1.65443  2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.3487338 -0.2107879 1.65443  3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.4643428 -0.217612  2.13381  1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.4593313 -0.2152211 2.13423  2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "milestone" 10        -0.4593313 -0.2152211 2.13423  3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              cut_date sim_id n   event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       1      400 229  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       1      400 295  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 45       1      400 355  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       2      400 241  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       2      400 290  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 46.21933 2      400 350  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       3      400 226  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       3      400 282  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 50.86585 3      400 350  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 7: MaxCombo (WLR-FH(0,0) + WLR-FH(0, 0.5))</span></span></span>
<span class="r-in"><span><span class="co"># for all analyses</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="va">maxcombo</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  rho <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              method     parameter               z         p_value      analysis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 2.615539e-05 1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 1.433049e-06 2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 1.247802e-05 3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 0.000235838  1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 6.130078e-05 2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 0.0007667834 3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 0.00121623   1       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 0.0002047186 2       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new "MaxCombo" "FH(0, 0) + FH(0, 0.5)" numeric,2 1.724936e-05 3       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              cut_date sim_id n   event</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       1      400 229  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       1      400 295  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 45       1      400 355  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       2      400 241  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       2      400 290  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 46.21933 2      400 350  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 24       3      400 226  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 32       3      400 282  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ans_1sim_new 50.86585 3      400 350  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 8: MaxCombo (WLR-FH(0,0.5) + milestone(10))</span></span></span>
<span class="r-in"><span><span class="co"># for all analyses</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="fu"><a href="maxcombo.html">maxcombo</a></span><span class="op">(</span>test1 <span class="op">=</span> <span class="va">wlr</span>, test2 <span class="op">=</span> <span class="va">milestone</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  test1_par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  test2_par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ms_time <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test 9: MaxCombo (WLR-FH(0,0) at IAs</span></span></span>
<span class="r-in"><span><span class="co"># and WLR-FH(0,0) + milestone(10) + WLR-MB(4,2) at FA)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">sim_gs_n</span><span class="op">(</span></span></span>
<span class="r-in"><span>  n_sim <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  sample_size <span class="op">=</span> <span class="fl">400</span>,</span></span>
<span class="r-in"><span>  enroll_rate <span class="op">=</span> <span class="va">enroll_rate</span>,</span></span>
<span class="r-in"><span>  fail_rate <span class="op">=</span> <span class="va">fail_rate</span>,</span></span>
<span class="r-in"><span>  test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">wlr</span>, ia2 <span class="op">=</span> <span class="va">wlr</span>, fa <span class="op">=</span> <span class="va">maxcombo</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ia1 <span class="op">=</span> <span class="va">ia1</span>, ia2 <span class="op">=</span> <span class="va">ia2</span>, fa <span class="op">=</span> <span class="va">fa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">2024</span>,</span></span>
<span class="r-in"><span>  test_par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    ia1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    ia2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    ia3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      test1_par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="fu"><a href="fh.html">fh</a></span><span class="op">(</span>rho <span class="op">=</span> <span class="fl">0</span>, gamma <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      test2_par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ms_time <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      test3_par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>delay <span class="op">=</span> <span class="fl">4</span>, w_max <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson, Yujie Zhao, Yilong Zhang. Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9. <br>Copyright © 2024 Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates. All rights reserved.</p>
</div>

<div class="pkgdown-footer-right">
  <p><span></span></p>
</div>

    </footer></div>

  

  

  </body></html>

