# Get date at which an event count is reached

Get date at which an event count is reached

## Usage

``` r
get_cut_date_by_event(x, event)
```

## Arguments

- x:

  A time-to-event dataset, for example, generated by
  [`sim_pw_surv()`](https://merck.github.io/simtrial/reference/sim_pw_surv.md).

- event:

  Event count at which dataset is to be cut off for analysis.

## Value

A numeric value with the `cte` from the input dataset at which the
targeted event count is reached, or if the final event count is never
reached, the final `cte` at which an event occurs.

## Examples

``` r
library(dplyr)
#> 
#> Attaching package: ‘dplyr’
#> The following objects are masked from ‘package:stats’:
#> 
#>     filter, lag
#> The following objects are masked from ‘package:base’:
#> 
#>     intersect, setdiff, setequal, union

# Use default enrollment and calendar cut date
# for 50 events in the "Positive" stratum
x <- sim_pw_surv(
  n = 200,
  stratum = data.frame(
    stratum = c("Positive", "Negative"),
    p = c(.5, .5)
  ),
  fail_rate = data.frame(
    stratum = rep(c("Positive", "Negative"), 2),
    period = rep(1, 4),
    treatment = c(rep("control", 2), rep("experimental", 2)),
    duration = rep(1, 4),
    rate = log(2) / c(6, 9, 9, 12)
  ),
  dropout_rate = data.frame(
    stratum = rep(c("Positive", "Negative"), 2),
    period = rep(1, 4),
    treatment = c(rep("control", 2), rep("experimental", 2)),
    duration = rep(1, 4),
    rate = rep(.001, 4)
  )
)

d <- get_cut_date_by_event(x |> filter(stratum == "Positive"), event = 50)

y <- cut_data_by_date(x, cut_date = d)
table(y$stratum, y$event)
#>           
#>             0  1
#>   Negative 50 44
#>   Positive 34 50
```
