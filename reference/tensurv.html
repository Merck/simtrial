<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Process Survival Data into Counting Process Format — tensurv • simtrial</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Process Survival Data into Counting Process Format — tensurv" />
<meta property="og:description" content="Produces a tibble that is sorted by stratum and time.
Included in this is only the times at which one or more event occurs.
The output dataset contains Stratum, tte (time-to-event), at risk count and count of events at the specified tte
sorted by Stratum and tte." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simtrial</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/arbitraryhazard.html">Approximating an arbitrary hazard function</a>
    </li>
    <li>
      <a href="../articles/modestWLRTVignette.html">Using the Magirr-Burman weights for testing</a>
    </li>
    <li>
      <a href="../articles/pMaxComboVignette.html">Computing p-values for Fleming-Harring weighted logrank tests and the MaxCombo test</a>
    </li>
    <li>
      <a href="../articles/simtrialroutines.html">Basic tools for time-to-event trial simulation and testing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Process Survival Data into Counting Process Format</h1>
    
    <div class="hidden name"><code>tensurv.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Produces a tibble that is sorted by stratum and time.
Included in this is only the times at which one or more event occurs.
The output dataset contains Stratum, tte (time-to-event), at risk count and count of events at the specified tte
sorted by Stratum and tte.</p>
    </div>

    <pre class="usage"><span class='fu'>tensurv</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>txval</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a tibble with no missing values and contain variables</p>
<p><code>Stratum</code> (Stratum)</p>
<p><code>Treatment</code> (Treatment group)</p>
<p><code>tte</code> (Observed time)</p>
<p><code>event</code> (Binary event indicator, 1 represents event, 0 represents censoring)</p></td>
    </tr>
    <tr>
      <th>txval</th>
      <td><p>value in the input <code>Treatment</code> column that indicates treatment group value.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>tibble</code> grouped by
<code>Stratum</code> and sorted within strata by <code>tte</code>.
Remain rows with at least one event in the population, at least one subject is at risk in both treatment group and control group.
Other variables in this represent the following within each stratum at each time at which one or more
events are observed:</p>
<p><code>events</code> (Total number of events)</p>
<p><code>txevents</code> (Total number of events at treatment group)</p>
<p><code>atrisk</code> (Number of subjects at risk)</p>
<p><code>txatrisk</code> (Number of subjects at risk in treatment group)</p>
<p><code>S</code> (Left-continuous Kaplan-Meier survival estimate)</p>
<p><code>OminusE</code> (In treatment group, observed number of events minus expected number of events.
          The expected number of events is estimated by assuming no treatment effect with hypergeometric distribution with
          parameters total number of events, total number of events at treatment group and number of events at a time.
          (Same assumption of log-rank test under the null hypothesis)</p>
<p><code>Var</code> (variance of OminusE under the same assumption).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function only considered two group situation.</p>
<p>The tie is handled by the Breslow's Method.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>

<span class='co'># Example 1</span>
<span class='va'>x</span><span class='op'>=</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>Stratum <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>10</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span>,
Treatment <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span>,<span class='fl'>4</span><span class='op'>)</span>,
tte <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>16</span>,
event<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span>,<span class='fl'>8</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>tensurv</span><span class='op'>(</span><span class='va'>x</span>, txval<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 6 x 9</span>
#&gt; <span style='color: #949494;'># Groups:   Stratum [2]</span>
#&gt;   Stratum events txevents   tte atrisk txatrisk     S OminusE   Var
#&gt;     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>       1      1        1     2      9        5 1       0.444 0.247
#&gt; <span style='color: #BCBCBC;'>2</span>       1      1        0     4      7        4 0.889  -<span style='color: #BB0000;'>0.571</span> 0.245
#&gt; <span style='color: #BCBCBC;'>3</span>       1      1        1     6      5        3 0.762   0.4   0.24 
#&gt; <span style='color: #BCBCBC;'>4</span>       1      1        0     8      3        2 0.610  -<span style='color: #BB0000;'>0.667</span> 0.222
#&gt; <span style='color: #BCBCBC;'>5</span>       2      1        0    12      5        2 1      -<span style='color: #BB0000;'>0.4</span>   0.24 
#&gt; <span style='color: #BCBCBC;'>6</span>       2      1        1    14      3        1 0.8     0.667 0.222</div><div class='input'>
<span class='co'># Example 2</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='simPWSurv.html'>simPWSurv</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fl'>400</span><span class='op'>)</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='cutDataAtCount.html'>cutDataAtCount</a></span><span class='op'>(</span><span class='va'>x</span>,<span class='fl'>150</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>tensurv</span><span class='op'>(</span>txval <span class='op'>=</span> <span class='st'>"Experimental"</span><span class='op'>)</span>
<span class='co'># weighted logrank test (Z-value and 1-sided p-value)</span>
<span class='va'>z</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>$</span><span class='va'>OminusE</span><span class='op'>)</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>$</span><span class='va'>Var</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>z</span>,<span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>pnorm</a></span><span class='op'>(</span><span class='va'>z</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] -2.616850952  0.004437254</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Keaven Anderson, Yilong Zhang. Site built with pkgdown 1.6.1.
  </p>
  <p>Copyright &copy; 2021 Merck Sharp & Dohme Corp., a subsidiary of Merck & Co., Inc., Kenilworth, NJ, USA.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


